---
import { getLoginUrl } from "../lib/auth";
const error = Astro.url.searchParams.get("error");
let errorMessage = "";
if (error === "auth_failed") {
	errorMessage = "Authentication failed. Please try again.";
} else if (error === "no_token") {
	errorMessage = "Invalid authentication response. Please try again.";
}
---

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Carleton University Login</title>
		<link
			href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
			rel="stylesheet"
		/>
	</head>
	<body class="min-h-screen flex items-center justify-center bg-gray-100">
		<div class="bg-white p-8 rounded-lg shadow-md w-96">
			<div class="flex justify-center mb-6">
				<img
					src="/images/campus-map.jpg"
					alt="Carleton University Logo"
					class="h-20"
				/>
			</div>
			<h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
				Sign in to Carleton
			</h2>
			<div class="space-y-4">
				<a
					href={getLoginUrl()}
					class="w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
				>
					<svg class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
						<path
							d="M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"
						></path>
					</svg>
					Sign in with Google
				</a>
				<div class="relative">
					<div class="absolute inset-0 flex items-center">
						<div class="w-full border-t border-gray-300"></div>
					</div>
					<div class="relative flex justify-center text-sm">
						<span class="px-2 bg-white text-gray-500">Or continue with</span>
					</div>
				</div>
				<button
					class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
				>
					Carleton Account (Coming Soon)
				</button>
			</div>
			<p class="mt-6 text-center text-sm text-gray-500">
				Need help? <a
					href="#"
					class="font-medium text-red-600 hover:text-red-500"
					>Contact IT Support</a
				>
			</p>
		</div>

		<script>
			// You can add any client-side JavaScript here if needed
		</script>
	</body>
</html>
{
	error && (
		<div class="mt-4 p-4 bg-red-100 text-red-700 rounded-md text-sm">
			{errorMessage}
		</div>
	)
}
